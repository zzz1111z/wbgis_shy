<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GIS地图助手 - 绘图工具</title>
    <!-- 引入自定义的样式文件 -->
    <link rel="stylesheet" href="css/huitu.css">
    <!-- 设置高德地图 JS API 安全密钥 -->
    <script type="text/javascript">
        window._AMapSecurityConfig = {
            securityJsCode: '22df78af295a16c740e9bc459e3c7119'
        };
    </script>
    <!-- 引入高德地图 JS API 2.0 脚本以及各类插件 -->
    <script type="text/javascript" src="https://webapi.amap.com/maps?v=2.0&key=96a371a1a4fbbff0c0467680af0ababe&plugin=AMap.MouseTool,AMap.Driving,AMap.Transfer,AMap.Walking"></script>
    <script src="https://webapi.amap.com/loca?v=2.0.0&key=96a371a1a4fbbff0c0467680af0ababe"></script>
    <script src="http://webapi.amap.com/ui/1.1/main.js?v=1.1.1"></script>
</head>

<body>
    <!-- 地图容器，添加类名用于样式设置，使其占满整个页面 -->
    <div id="container" class="map-container"></div>
    <h3 id="title">GIS地图助手 - 绘图工具</h3>
    <!-- 绘图功能窗口，添加类名用于样式设置，使其呈现为卡片样式 -->
    <div id="draw_window" class="draw-card">
        <h4>绘图工具</h4>
        <div class="button-group">
            <button id="draw_button_start">开始绘图</button>
            <!-- 移除结束绘图按钮 -->
            <!-- <button id="draw_button_stop">结束绘图</button> -->
        </div>
        <!-- 添加提醒文本区域 -->
        <div class="reminder-text">
            <p>1. 点击“开始绘图”按钮即开启功能</p>
            <p>2. 用刷新地图来消除上次绘图结果</p>
        </div>
    </div>

    <script>
        // 创建地图实例
        const map = new AMap.Map('container', {
            zoom: 10,
            center: [116.397428, 39.90923], // 默认中心点: 北京天安门
        });

        // 绘图工具
        const mouseTool = new AMap.MouseTool(map);
        let drawActive = false;
        let drawnOverlay = null;

        document.getElementById('draw_button_start').onclick = function () {
            if (!drawActive) {
                drawActive = true;
                mouseTool.polygon();
                alert('绘图功能已开启');
            } else {
                alert('绘图功能已在运行');
            }
        };

        // 移除了结束绘图的按钮和相关功能
    </script>
</body>

</html>
